import { wasm } from './circuit_tester';
import { expect } from 'chai';

describe('Expand message test test', () => {
  it('Test 1', async () => {
    const circuit = await wasm(
      './scripts/expand_message/expand_message.circom',
    );

    const witnes = await circuit.calculateWitness({
      in: [
        0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 1,
        0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0,
        0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1,
        0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0,
        0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1,
        0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0,
        1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 0,
        0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0,
        0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0,
        1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0,
        0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1,
      ],
    });

    let str = '';

    for (var i = 1; i <= 2048; i++) {
      str += witnes[i].toString();
    }

    expect(str).to.be.eq(
      '01100110100011101000001000001000101110101100100010100110110101011111000010011011100110100101111110110000000011110011011111000100111011110000100010001110111011010001100100011011011001011111010100101111110010011110010101100111000011010000001100101001000111100110100010100111011100100010101011110101100001001111011111100110010000110100010111010001101001011011101110010111100100011111101110010111100010001001110001001111011101000111011100111011000000000000000100100010110010101010101101000110011100100100011100111111010010000011110011110100000000100010000011111010100100010000010101110110100011001011100011011110111010111011101000110111011001100011001010010100001100110001010101000001101100001011111001110010011100110001111101100001000100010010110000111010001010000111010001110100100100011010000010010001101000111011000010000011000110111101000100100001101101011100111100101010100011110000101101010000100100111001110000000101111100011001100010101000011000100011000111100110111111100010101101110111001001101010011100010011101001000111111111000110011011110111101001110011110110001010101111100111010001100001100001011110101001000000000010111011100111010011110111110110100101010100111000111111011100010000000101000101011001000000001011100011100010011110001100011111001011010111101111010011110001000100000101001000111100111110001010110001110101010110001111010010101101110111100110101111101011111000100000011010100110100010010010111001010100000101001010100101100000010011111000100100101101110100011110011100001001011011110110100001010000101101111001001010000111001110010011100000011111001011101010100111011010110111100111011111001011001111001111001101001011101100001100100000100111100011011110111011101010001010111110010110000001010010001010010110010110111110100000011100101100000111100100110011000011110100110001010011001011010000101101110001111000011111011100000100011101001111100101001101010010110101110110101101000011100110110100111000000110111000011011111011011100001100110000011101110100111010000111111101001110011000001011111111000001111010100110111110',
    );
  });
});
